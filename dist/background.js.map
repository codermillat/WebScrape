{"version":3,"file":"background.js","sources":["../src/background/index.ts"],"sourcesContent":["/**\n * Background service worker bootstrap (Phase 2 scaffold).\n * NOTE: Manifest still points to legacy background.js until migration completes.\n */\nimport { logger } from '../shared/logger';\n\nlogger.info('Background scaffold loaded (inactive until manifest swap)');\n\ntype BgScaffoldPing = { __ping: 'bg_scaffold' };\n\ntype AnyMessage = BgScaffoldPing | Record<string, unknown>;\n\nchrome.runtime.onMessage.addListener((\n  msg: AnyMessage,\n  _sender: chrome.runtime.MessageSender,\n  sendResponse: (response?: unknown) => void\n): boolean | void => {\n  if (!msg || typeof msg !== 'object') return;\n  if ('__ping' in msg && (msg as BgScaffoldPing).__ping === 'bg_scaffold') {\n    sendResponse({ ok: true, scaffold: true, ts: Date.now() });\n    return;\n  }\n  // Return false (no async response) for unhandled messages\n  return false;\n});\n\n// Graceful idle log (service worker may terminate earlier)\nsetTimeout(() => {\n  logger.debug('Background scaffold idle checkpoint');\n}, 2000);\n"],"names":[],"mappings":";AAMA,OAAO,KAAK,2DAA2D;AAMvE,OAAO,QAAQ,UAAU,YAAY,CACnC,KACA,SACA,iBACmB;AACnB,MAAI,CAAC,OAAO,OAAO,QAAQ,SAAU;AACrC,MAAI,YAAY,OAAQ,IAAuB,WAAW,eAAe;AACvE,iBAAa,EAAE,IAAI,MAAM,UAAU,MAAM,IAAI,KAAK,IAAA,GAAO;AACzD;AAAA,EACF;AAEA,SAAO;AACT,CAAC;AAGD,WAAW,MAAM;AACf,SAAO,MAAM,qCAAqC;AACpD,GAAG,GAAI;"}